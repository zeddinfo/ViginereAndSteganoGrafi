<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="style.css" rel="stylesheet">
    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css" type="text/css">
</head>

<body>
    <div class="container">
        <div class=" text-center mt-5 ">
            <h1>Form Stegano LSB</h1>
        </div>
        <div class="row ">
            <div class="col-lg-7 mx-auto">
                <div class="card mt-2 mx-auto p-4 bg-light">
                    <div class="card-body bg-light">
                        <div class="container">
                            <form id="contact-form" role="form">
                                <div class="controls">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group first"> <label for="uploadFile"><b>Step 1 - Pilih
                                                        Secret Data</b> <span
                                                        id="format">(txt/word/doc)</span></label><br>
                                                <input id="uploadFile" placeholder="Pilih File..."
                                                    disabled="disabled" />
                                                <div class="fileUpload btn btn-primary">
                                                    <span>Upload</span>
                                                    <input id="uploadBtn" type="file" class="upload" />
                                                </div>
                                                <div id="btn-aksi">
                                                    <button type="button" id="btn-encrypt"
                                                        class="btn btn-warning">GreyScale</button>
                                                    <button type="button" id="btn-decrypt"
                                                        class="btn btn-success">RGB</button>
                                                    <button type="button" id="btn-download" class="btn btn-info"
                                                        style="display:none;">
                                                        <a id="sedot" href="" download="viginere.txt">Download</a>
                                                    </button>
                                                    <span id="error" style="display: none;">Format tidak di dukung
                                                        !!!</span>
                                                </div>
                                                <span id="error" style="display: none;">Format tidak di dukung
                                                    !!!</span>
                                            </div>

                                            <input type="file" name="file" id="file" onchange="imgchange(this)">
                                            <img id="imgs" width="170px" height="160px"></img>
                                            <canvas id="myCanvas" width="240" height="297"
                                                style="border:1px solid #d3d3d3;">
                                                Your browser does not support the HTML5 canvas tag.
                                            </canvas>
                                            <h1 onclick="cek()">cek</h1>
                                            <input type="radio" id="original" name="color" value="original" checked>
                                            <label for="original">Original</label>

                                            <input type="radio" id="grayscale" name="color" value="grayscale">
                                            <label for="grayscale">Grayscale</label>

                                            <input type="radio" id="inverted" name="color" value="inverted">
                                            <label for="inverted">Inverted</label>

                                            <input type="radio" id="sepia" name="color" value="sepia">
                                            <label for="sepia">Sepia</label>

                                            <div class="form-group second"> <label for="uploadFile"><b>Step 2 - Masukkan
                                                        Password</b> <span id="format">(Varchar)</span></label><br>
                                                <input id="key" placeholder="Masukan Password" type="text" />
                                                <div id="btn-aksi">
                                                    <button type="button" id="btn-encrypt"
                                                        class="btn btn-warning">Encrypt</button>
                                                    <button type="button" id="btn-decrypt"
                                                        class="btn btn-success">Decrypt</button>
                                                    <button type="button" id="btn-download" class="btn btn-info"
                                                        style="display:none;">
                                                        <a id="sedot" href="" download="viginere.txt">Download</a>
                                                    </button>
                                                    <span id="error" style="display: none;">Format tidak di dukung
                                                        !!!</span>
                                                </div>
                                            </div>
                                            <div class="alert alert-info" id="proses" style="display: none;"></div>

                                            <div class="form-group output" style="display: none;"> <label
                                                    for="uploadFile"><b>Result Viginere</b> <span
                                                        id="format"></span></label><br>
                                                <textarea id="output" style="width: 100%;"
                                                    disabled="disabled"></textarea>
                                                <input type="hidden" id="teks">
                                            </div>

                                            <div class="form-group pilih-viginere" style="display: none;"> <label
                                                    for="uploadFile"><b>Step 3 - Pilih File Enkripsi Viginere</b> <span
                                                        id="format">(txt/word/doc)</span></label><br>
                                                <input id="uploadFile" class="stego" placeholder="Pilih File..."
                                                    disabled="disabled" />
                                                <span id="error" style="display: none;">Format tidak di dukung
                                                    !!!</span>
                                            </div>

                                            <div class="form-group pilih-cover" style="display: none;"> <label
                                                    for="uploadFile"><b>Step 4 - Pilih Cover Image</b> <span
                                                        id="format">(jpg/png)</span></label><br>
                                                <input id="uploadFile" class="gambar" placeholder="Pilih File..."
                                                    disabled="disabled" />
                                                <div class="fileUpload btn btn-primary">
                                                    <span>Upload</span>
                                                    <input id="cover" type="file" class="upload" />
                                                </div>
                                                <button type="button" id="hideData" style="display: none;"
                                                    class="btn btn-info">Hidedata</button>

                                                <span id="error" style="display: none;">Format tidak di dukung
                                                    !!!</span>
                                            </div>

                                            <div class="alert alert-info" id="hide" style="display: none;"></div>

                                            <div class="form-group hasil-gambar" style="display: none;"> <label
                                                    for="uploadFile"><b>Hasil Gambar setelah di hide</b> </label><br>
                                                <canvas id="canvas" width="400" height="400"></canvas>
                                                <hr />
                                            </div>

                                            <div class="form-group download" style="display: none;"> <label
                                                    for="uploadFile"><b>Silahkan klik kanan dan download gambar ini</b>
                                                </label><br>
                                                <canvas id="secret" width="400" height="400"></canvas>
                                                <hr />
                                            </div>

                                            <div class="form-group file-download" style="display: none;"> <label
                                                    for="uploadFile"><b>Step 5 - Pilih file yang sebelumnya di
                                                        download</b> <span id="format">(Gambar yg sudah di
                                                        download)</span></label><br>
                                                <input id="uploadFile" class="reupload" placeholder="Pilih File..."
                                                    disabled="disabled" />
                                                <div class="fileUpload btn btn-primary">
                                                    <span>Upload</span>
                                                    <input id="loadFile" type="file" class="upload" />
                                                </div>
                                                <span id="error" style="display: none;">Format tidak di dukung
                                                    !!!</span>
                                            </div>

                                            <div class="alert alert-info" id="last" style="display: none;"></div>
                                            <div class="form-group hasil" style="display: none;"> <label
                                                    for="uploadFile"><b>Hasil akhir file akan otomatis di download</b>
                                                </label><br>
                                                <canvas id="coverAfter" width="400" height="400"></canvas>
                                                <hr />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <footer class="modal-footer">
                                    <button type="button" class="btn btn-success" id="btn-stegano"
                                        onclick="stegano()">Stegano</button>
                                    <button type="button" class="btn btn-info" id="btn-viginere" style="display: none;"
                                        onclick="viginere()">Viginere</button>
                                </footer>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- /.8 -->
            </div>
            <!-- /.row-->
        </div>
    </div>
</body>

</html>
<!-- JS, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
</script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
</script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
    integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="main.js" type="text/javascript"></script>
<script>
    ///Fungsi menampilkan dan menghilangkan beberapa form
    function stegano() {
        $('.first').hide("slow");
        $('.second').hide("slow");
        $('.output').slideUp();
        $('.pilih-viginere').show("slow");
        $('.pilih-cover').show("slow");
        $('.file-download').show("slow");
        $('#btn-stegano').hide();
        $('#btn-viginere').show();
    }

    function viginere() {
        $('.pilih-viginere').hide("slow");
        $('.pilih-cover').hide("slow");
        $('.file-download').hide("slow");
        $('#hideData').slideUp();
        $('.hasil-gambar').hide("slow");
        $('.download').hide("slow");
        $('.file-download').hide("slow");
        $('#hide').slideUp();
        $('#last').slideUp();
        $('.hasil').hide("slow");

        $('.first').show("slow");
        $('.second').show("slow");
        // $('.output').show("slow");
        $('#btn-stegano').show();
        $('#btn-viginere').hide();
    }

    ///Event Upload file dan mengambil nama filenya
    $('#uploadBtn').change(function () {
        var file = $('#uploadBtn').val().split('\\').pop();
        if (file != '') {
            $('#uploadFile').prop('placeholder', '' + file + '');
            $('.stego').prop('placeholder', '' + file + '');
            console.log(file);
            // alert(file.split('.').pop());
            var ext = file.split('.').pop();
            if (ext == 'txt' || ext == 'docx') {
                $('#error').hide();
                console.log(ext);
            } else {
                $('#error').show();
            }
        } else {
            $('#uploadFile').prop('placeholder', 'Pilih File...');
            console.log(file);
        }
    });

    // $('#myFile').change(function() {
    //     var file = $('#myFile').val().split('\\').pop();
    //     if (file != '') {
    //         $('.stego').prop('placeholder', '' + file + '');
    //         console.log(file);
    //         // alert(file.split('.').pop());
    //         var ext = file.split('.').pop();
    //         if (ext == 'txt' || ext == 'docx') {
    //             $('#error').hide();
    //             console.log(ext);
    //         } else {
    //             $('#error').show();
    //         }
    //     } else {
    //         $('.stego').prop('placeholder', 'Pilih File...');
    //         console.log(file);
    //     }
    // });

    $('#cover').change(function () {
        var file = $('#cover').val().split('\\').pop();
        if (file != '') {
            $('.gambar').prop('placeholder', '' + file + '');
            console.log(file);
            // alert(file.split('.').pop());
            var ext = file.split('.').pop();
            if (ext == 'jpg' || ext == 'PNG' || ext == 'png' || ext == 'JPG') {
                // alert(ext);
                $('#error').hide();
                $('#hideData').show();
                console.log(ext);
            } else {
                alert("Error");
                $('#error').show();
            }
        } else {
            $('.gambar').prop('placeholder', 'Pilih File...');
            console.log(file);
        }
    });

    $('#loadFile').change(function () {
        var file = $('#loadFile').val().split('\\').pop();
        if (file != '') {
            $('.reupload').prop('placeholder', '' + file + '');
            console.log(file);
            // alert(file.split('.').pop());
            var ext = file.split('.').pop();
            if (ext == 'jpg' || ext == 'png') {
                $('#error').hide();
                console.log(ext);
                $('#last').show();
                $('#last').removeClass('alert-info');
                $('#last').addClass('alert-warning');
                $('#last').html("Downloading...");
                setTimeout(function () {
                    $('#last').removeClass('alert-warning');
                    $('#last').addClass('alert-success');
                    $('#last').html("Sukses...");
                    $('.hasil').show();
                }, 3000);
            } else {
                $('#error').show();
                $('#hideData').hide();
            }
        } else {
            $('.reupload').prop('placeholder', 'Pilih File...');
            console.log(file);
        }
    });

    $('#hideData').click(function () {
        $('#hide').show();
        $('#hide').removeClass('alert-info');
        $('#hide').addClass('alert-warning');
        $('#hide').html("Silahkan tunggu sampai selesai...");
        setTimeout(function () {
            $('#hide').removeClass('alert-warning');
            $('#hide').addClass('alert-success');
            $('#hide').html("Sukses...");
            // $('.hasil-gambar').show();
            $('.download').show();
        }, 3000);

    });

    ///Validasi File
    $('#key').keypress(function () {
        var elm = this.value;
        if (elm != '') {
            $('btn-encrypt').prop('disabled', false);
        } else {
            $('btn-encrypt').prop('disabled', true);
        }
    });

    ///Event Download file
    $('#sedot').click(function () {
        var data = $('#teks').val();
        this.href = "data:text/plain;charset=UTF-8," + encodeURIComponent(data);
    });

    ///Event memanggil fungsi enkripsi
    $('#btn-encrypt').click(function () {
        $('#proses').show();
        $('#proses').removeClass('alert-info');
        $('#proses').addClass('alert-warning');
        $('#proses').html("Sedang di Enkripsi...");
        setTimeout(function () {
            doCrypt(false);
            $('#proses').removeClass('alert-warning');
            $('#proses').addClass('alert-success');
            $('#proses').html("Sukses...");
            // $('.output').show();
        }, 3000);
    });

    ///event menamggil dekrip
    $('#btn-decrypt').click(function () {
        $('#proses').show();
        $('#proses').removeClass('alert-success');
        $('#proses').addClass('alert-warning');
        $('#proses').html("Sedang di Dekripsi...");
        setTimeout(function () {
            doCrypt(true);
            $('#proses').removeClass('alert-warning');
            $('#proses').addClass('alert-success');
            $('#proses').html("Sukses...");
            $('.output').show();
        }, 3000);
    });
</script>